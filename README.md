# WeiboSpammer
Course project of Social Network Mining(DATA130007.01), Supervised by [Deqing Yang](http://www.cs.fudan.edu.cn/?page_id=2393)

Copyright (c) 2020 by [Xiaoxin He](https://github.com/Cautiousss),Xixi Wu @Fudan Univerisity

##

## ğŸ˜„ä½¿ç”¨æˆ‘ä»¬çš„å¾®åšä¸ªæ€§åŒ–æŠ¥å‘Š
[å‰ç«¯æ•ˆæœ](https://github.com/Cautiousss/Weibo)

åœ¨`./app/main.py`ä¸­ï¼Œæ”¹å˜ä»»æ„ç”¨æˆ·çš„idï¼Œå³å¯ç”Ÿæˆè¯¥ç”¨æˆ·æ–°æµªå¾®åšä¸ªæ€§åŒ–æŠ¥å‘Šã€‚
è¿è¡Œæˆªå›¾ï¼š
<img src="https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/app_log.png" width = "600" height = "350" alt="å›¾ç‰‡è¯´æ˜" align=center />

è¯¥ä¸ªæ€§åŒ–æŠ¥å‘ŠåŒ…æ‹¬(è¿™é‡Œæˆ‘ä»¬ä»¥æ˜æ˜Ÿç§¦æ˜Šä¸ºä¾‹)ï¼š

* å¾®åšå†…å®¹è¯äº‘
   ![wc](https://github.com/WxxShirley/WeiboSpammer/blob/master/app/derived/kw_1740197697.png)
* å¥½å‹åœ¨ä¸­å›½åœ°å›¾åˆ†å¸ƒ
   ![regoin](https://github.com/WxxShirley/WeiboSpammer/blob/master/app/derived/region_1740197697.png)
* å¼‚å¸¸ç²‰ä¸(è°ƒç”¨æˆ‘ä»¬é¢„è®­ç»ƒçš„è™šå‡ç”¨æˆ·åˆ†ç±»æ¨¡å‹)
* æ²‰å¯‚å…³æ³¨(æœ€è¿‘åŠå¹´æ²¡å‘å¾®åš)
* å‘å¾®åšæ—¶é—´ç»Ÿè®¡å›¾
  <img src="https://github.com/WxxShirley/WeiboSpammer/blob/master/app/derived/date_1740197697.png" width = "400" height = "300" alt="å›¾ç‰‡è¯´æ˜" align=center />
   

## å·¥ä½œä»‹ç»
* æ–°æµªå¾®åšè™šå‡ç”¨æˆ·æ£€æµ‹
  * çˆ¬å–2kç”¨æˆ·çš„è¯¦ç»†ä¸ªäººä¿¡æ¯ä¸å…¨éƒ¨å¾®åšå†…å®¹ï¼Œäººå·¥æ ‡æ³¨ç±»åˆ«ï¼Œæ„å»ºæ•°æ®é›†
    > æ•°æ®é›†åœ¨ `./data`ç›®å½•ä¸‹ï¼Œå…¶ä¸­æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ä¸º83:17
  * ç‰¹å¾æŠ½å–
     * ç¤¾ä¼šç‰¹å¾ï¼šå…³æ³¨æ•° (F1)ã€ç²‰ä¸æ•° (F2)ã€å…³æ³¨ç²‰ä¸æ¯” (F3)
     * ç”¨æˆ·è¡Œä¸ºç‰¹å¾ï¼šæœˆå‡å¾®åš (F4)ã€æ—¶é—´é—´éš” (F5)ã€è½¬å‘æ¯” (F6)
     * å†…å®¹ç‰¹å¾ï¼šURL é“¾æ¥æ¯” (F7)ã€å¾®åšè¯„è®ºæ¯” (F8)ã€åŸåˆ›å¾®åšè¯„è®ºæ¯” (F9)ã€å¾®åšå¹³å‡é•¿åº¦ (F10)ã€åšæ–‡ä½™å¼¦ç›¸ä¼¼åº¦(F11ã€F12)
  * è®­ç»ƒæœºå™¨å­¦ä¹ åˆ†ç±»å™¨ï¼ŒåŒ…æ‹¬SVMã€KNNã€RFç­‰ã€‚
     * å„ä¸ªæ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„F1ã€AUCã€Recallã€Precisionä¸ŠåŸºæœ¬éƒ½èƒ½è¾¾åˆ°90%ä»¥ä¸Šï¼Œæ€§èƒ½å¥½
     * éšæœºæ£®æ—æ¨¡å‹æ•ˆæœæœ€å¥½ï¼ŒAUCã€F1éå¸¸æ¥è¿‘1

* æ­£å¸¸ç”¨æˆ·ç¤¾äº¤ç½‘ç»œ(NormNet)ä¸è™šå‡ç”¨æˆ·ç¤¾äº¤ç½‘ç»œ(SpamNet)å¯è§†åŒ–ä¸åˆ†æ
  * æ„å»ºæ–¹å¼ï¼šåœ¨ä¸Šè¿°æ•°æ®é›†ä¸­éšæœºé€‰æ‹©1ä¸ªæ­£å¸¸ç”¨æˆ·ä¸1ä¸ªè™šå‡ç”¨æˆ·ï¼Œçˆ¬å–ä¸‰é˜¶ç²‰ä¸ç½‘ç»œ
  * è§„æ¨¡ï¼š
     - NormNet:èŠ‚ç‚¹909ï¼Œè¾¹2659
     - SpamNet:èŠ‚ç‚¹891ï¼Œè¾¹1423
  * å¯è§†åŒ–éƒ¨åˆ†:å…³æ³¨-è¢«å…³æ³¨å…³ç³»,å¾®åšè½¬å‘å…³ç³»,åœ°åŸŸé—´å…³æ³¨å…³ç³»
  * ç½‘ç»œå±æ€§åˆ†æ:åº¦åˆ†å¸ƒã€è¿é€šæ€§ã€åŒè´¨æ€§

* åº”ç”¨
   * åŠŸèƒ½ï¼šè¾“å…¥ä»»æ„ä¸€ä½æ–°æµªå¾®åšç”¨æˆ·çš„idï¼Œç”Ÿæˆä»–/å¥¹çš„ä¸ªæ€§åŒ–æŠ¥å‘Šã€‚
   * åŒ…æ‹¬ï¼š**å¾®åšå†…å®¹è¯äº‘å›¾**ã€**å¥½å‹åˆ†å¸ƒçš„ä¸­å›½åœ°å›¾**ã€**æ²‰å¯‚å…³æ³¨**ï¼ˆå…³æ³¨çš„äººä¸­è¿‘åŠå¹´æ²¡æœ‰å‘å¾®åšçš„ï¼‰ã€**å¼‚å¸¸ç²‰ä¸**ï¼ˆåº”ç”¨æˆ‘ä»¬è®­ç»ƒå¥½çš„åˆ†ç±»æ¨¡å‹ï¼Œæ£€æµ‹ç²‰ä¸ä¸­çš„è™šå‡ç”¨æˆ·ï¼‰
##

## ä»£ç ä¸æ–‡ä»¶ä»‹ç»
#### çˆ¬è™« `./crawler`
* `user_weibo.py`ï¼šæŒ‡å®šç”¨æˆ·idï¼Œçˆ¬å–è¯¥ç”¨æˆ·è¯¦ç»†ä¸ªäººä¿¡æ¯ä¸å…¨éƒ¨å¾®åšå†…å®¹ï¼Œå†™å…¥csvæ–‡ä»¶ä¸­
    * ç”¨æˆ·ä¿¡æ¯åŒ…æ‹¬ï¼šidã€æ˜µç§°ã€åœ°åŒºã€æ€§åˆ«ã€ä¿¡ç”¨ã€æ³¨å†Œæ—¶é—´ã€å¾®åšæ•°ã€å…³æ³¨æ•°ã€ç²‰ä¸æ•°ã€ä¸ªäººç®€ä»‹
    * å¾®åšå†…å®¹åŒ…æ‹¬ï¼šå¾®åšidã€å†…å®¹ã€å‘å¸ƒæ—¶é—´ï¼ˆ**ç²¾ç¡®åˆ°åˆ†**ï¼‰ã€æ˜¯å¦è½¬å‘ã€é•¿åº¦ã€æ˜¯å¦å«urlã€ç‚¹èµæ•°ã€è½¬å‘æ•°ã€å…³æ³¨æ•°
* `bfs_network.py`ï¼šæŒ‡å®šç”¨æˆ·idï¼Œçˆ¬å–å…¶ä¸‰é˜¶ç²‰ä¸ç½‘ç»œã€å†™å…¥csvæ–‡ä»¶ä¸­
> æ³¨æ„ï¼šéœ€è¦è®¾å®šè‡ªå·±çš„cookieä»¥åŠè°ƒæ•´ä¼‘çœ æ—¶é—´ï¼ˆæ–°æµªå¾®åšapiæœ‰é™æµï¼‰

#### è™šå‡ç”¨æˆ·æ£€æµ‹äºŒåˆ†ç±»æ•°æ®é›† `./data`
* `UserDetail.csv` ç”¨æˆ·ä¿¡æ¯ 
  > è¿™äº›ç”¨æˆ·æ˜¯ä»è”¡å¾å¤å¾®åšè¯„è®ºä¸­éšæœºé€‰æ‹©ï¼Œå› æ­¤è™šå‡è´¦å·è¾ƒå¤šï¼Œè€Œä¸”éå¸¸å…¸å‹
* `weibo.csv` ä¸Šè¿°ç”¨æˆ·çš„å¾®åšä¿¡æ¯

#### ä¸¤ç±»ç½‘ç»œåˆ†æ `./network_analysis`
* NormNet - æ­£å¸¸ç”¨æˆ·ç½‘ç»œ
  * `User.csv`,`Edge.csv`: å¯ç›´æ¥å¯¼å…¥Gephiï¼Œè¿›è¡Œç½‘ç»œå¯è§†åŒ–å’Œç½‘ç»œå±æ€§è®¡ç®—
  * `weibo.csv`: è¯¥ç½‘ç»œçš„ç”¨æˆ·å¾®åšï¼ˆåªçˆ¬å–äº†æœ€è¿‘çš„äºŒåæ¡ï¼‰
  * `homogenetiy.py`: ç½‘ç»œåŒè´¨æ€§åˆ†æï¼ŒåŒ…æ‹¬ï¼š
     * ç”¨æˆ·å¾®åšå†…å®¹ä¸å¥½å‹å¾®åšå†…å®¹ç›¸ä¼¼åº¦ï¼Œè®¡ç®—æ–¹å¼åœ¨`textSimi.py`-ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—
     * ä»»æ„ä¸€ä¸ªç”¨æˆ·ä¸å¥½å‹åœ¨ä¸­å›½åœ°å›¾ä¸Šçš„åˆ†å¸ƒå›¾
     * ç”¨æˆ·é—´å¾®åšè½¬å‘å…³ç³»ï¼Œå¹¶å¯è§†åŒ–
* SpamNet - è™šå‡ç”¨æˆ·ç½‘ç»œ
   æ–¹æ³•ç±»ä¼¼ï¼Œå› æ­¤åªä¸Šä¼ äº†æ•°æ®

#### è¡ç”Ÿçš„å¾®åšä¸ªæ€§åŒ–æŠ¥å‘Š `./app`
å¯åŠ¨main.py,å³å¯è·å–ä»»æ„idçš„ç”¨æˆ·çš„æ–°æµªå¾®åšæŠ¥å‘Š

##


## æ­£å¸¸ç”¨æˆ·ä¸è™šå‡ç”¨æˆ·ç¤¾äº¤ç½‘ç»œå·®å¼‚åˆ†æ
### ç½‘ç»œå¯è§†åŒ–
* å…³æ³¨-è¢«å…³æ³¨å…³ç³»
  * æ­£å¸¸ç”¨æˆ·ç½‘ç»œ - è¿æ¥ç¨ å¯†ï¼Œå¤–å›´å°çš„èšé›†
    ![normalnet](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/NormNet.jpeg)
  * è™šå‡ç”¨æˆ·ç½‘ç»œ - ä¸€ä¸ªä¸ªå°çš„èšé›†åœˆï¼Œ**å°ä¸–ç•Œ**ç°è±¡æ˜¾è‘—
    ![spamnet](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/SpamNet.jpeg)

* å¾®åšè½¬å‘å…³ç³»
   * æ­£å¸¸ç”¨æˆ·çš„ç¤¾äº¤ç½‘ç»œé—´å­˜åœ¨å¾®åšè½¬å‘å…³ç³»ï¼Œå¦‚ä¸‹å›¾. æˆ‘ä»¬åªçˆ¬äº†ä»–ä»¬æœ€è¿‘çš„äºŒåæ¡å¾®åšï¼Œè¿™ä¹ç™¾ä¸ªèŠ‚ç‚¹ä¾¿å·²ç»å¯ä»¥å½¢æˆéå¸¸å¯è§‚çš„è½¬å‘å…³ç³»
   ![repost](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/RepostNetwork.jpeg)


### ç½‘ç»œå±æ€§
* åº¦åˆ†å¸ƒã€‚NormNetå¹³å‡åº¦æ•°2.9ï¼ŒSpamNet1.5ã€‚NormNetçš„åº¦åˆ†å¸ƒèƒ½æ‹Ÿåˆå‡ºå¹‚å¾‹åˆ†å¸ƒ
  ![degree](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/degree.png)
  
  
* è¿é€šæ€§ã€‚NormNetå¼ºè¿é€šåˆ†ç±»420ï¼Œè¿œå°äºSpamNetã€‚NormNetå¹³å‡è·¯å¾„é•¿åº¦**5.22**ï¼Œéå¸¸æ¥è¿‘**å…­åº¦**ç©ºé—´ç†è®º  

* åŒè´¨æ€§ã€‚
  * æ¯”è¾ƒç”¨æˆ·çš„å¾®åšå†…å®¹ä¸å¥½å‹çš„å¾®åšå†…å®¹ï¼Œæ–‡æœ¬ç›¸ä¼¼åº¦é«˜
  * æ´»è·ƒæ—¶é—´ã€‚
     å°±ä¸€å¤©ä¸­å‘æ–‡æ—¶é—´æ¥çœ‹ï¼Œæ­£å¸¸ç”¨æˆ·åœ¨ä¸­åˆå’Œæ™šä¸Šæœ‰ä¸¤ä¸ªé«˜å³°ï¼Œç¬¦åˆæ­£å¸¸ç”¨æˆ·é€šå‹¤ä½œæ¯ã€‚è™šå‡ç”¨æˆ·å¤œé—´é¢‘ç‡é«˜
     å°±ä¸€å¹´ä¸­å„æœˆå¾®åšæ•°ç»Ÿè®¡ï¼Œæ­£å¸¸ç”¨æˆ·å„æœˆè¾ƒä¸ºå‡è¡¡ï¼Œè€Œè™šå‡ç”¨æˆ·æœ‰çŸ­æ—¶çªå‘æ€§ã€‚
     ![time_cmp1](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/time_comp.png)
     ![time_cmp2](https://github.com/WxxShirley/WeiboSpammer/blob/master/imgs/time_comp2.png)
     
  
## å‚è€ƒ
1.çˆ¬è™«å‚è€ƒ(https://github.com/dataabc/weiboSpider , https://github.com/dataabc/weibo-crawler)
  > ç¬¬äºŒä¸ªæ˜¯å…cookieç‰ˆï¼Œç¼ºç‚¹æ˜¯å¾®åšå‘å¸ƒæ—¶é—´åªèƒ½ç²¾ç¡®åˆ°å¤©ï¼Œç¬¬ä¸€ç‰ˆèƒ½ç²¾ç¡®åˆ°åˆ†
2.å¾®åšæ•°æ®å¯è§†åŒ–(https://github.com/easilylazy/gitskills)  
  > å‚è€ƒå…³æ³¨å…³ç³»å½¢æˆçš„ä¸­å›½åœ°å›¾ã€åšæ–‡ä¼ æ’­ç»˜åˆ¶

## 
